<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Custom widgets · Interact</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Interact</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Introduction</a></li><li><a class="toctext" href="observables.html">Observables</a></li><li><a class="toctext" href="widgets.html">Widgets</a></li><li class="current"><a class="toctext" href="custom_widgets.html">Custom widgets</a><ul class="internal"><li><a class="toctext" href="#The-recipe-macro-1">The recipe macro</a></li><li><a class="toctext" href="#A-simpler-approach:-the-manipulate-macro-1">A simpler approach: the manipulate macro</a></li></ul></li><li><a class="toctext" href="layout.html">Layout</a></li><li><a class="toctext" href="deploying.html">Deploying the web app</a></li><li><a class="toctext" href="tutorial.html">Tutorial</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="custom_widgets.html">Custom widgets</a></li></ul><a class="edit-page" href="https://github.com/JuliaGizmos/Interact.jl/blob/master/docs/src/custom_widgets.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Custom widgets</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Custom-widgets-1" href="#Custom-widgets-1">Custom widgets</a></h1><p>Besides the standard widgets, Interact provides a framework to define custom GUIs. This is currently possible with two approaches, the full featured <a href="custom_widgets.html#Widgets.@widget"><code>@widget</code></a> macro and the simple to use but more basic <a href="custom_widgets.html#InteractBase.@manipulate"><code>@manipulate</code></a> macro.</p><h2><a class="nav-anchor" id="The-recipe-macro-1" href="#The-recipe-macro-1">The recipe macro</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Widgets.@widget" href="#Widgets.@widget"><code>Widgets.@widget</code></a> — <span class="docstring-category">Macro</span>.</div><div><p><code>@widget(wdgname, func_call)</code></p><p>Special macro to create &quot;recipes&quot; for custom widgets. The <code>@widget</code> macro takes to argument, a variable name <code>wdgname</code> and a function call <code>func_call</code>. The function call is changed by the macro in several ways:</p><ul><li><p>an extra line is added at the beginning to initiliaze a variable called <code>wdgname::Widget</code> that can be used to refer to the widget in the function body</p></li><li><p>all lines of the type <code>sym::Symbol = expr</code> are replaced with <code>wdgname[sym] = @map(wdgname, expr)</code>, see <a href="custom_widgets.html#Widgets.@map"><code>Widgets.@map</code></a> for more details</p></li><li><p>an extra line is added at the end to return <code>wdgname</code></p></li></ul><p>The macro then registers the function <code>func_call</code> and exports it. It also overloads the <code>widget</code> function with the following signature:</p><p><code>Widgets.widget(::Val{Symbol(func_name)}, args...; kwargs..) = func_name(args...; kwargs...)</code></p></div><a class="source-link" target="_blank" href="https://github.com/piever/Widgets.jl/blob/e3085cdcce96206c595093ed8d994e051d95131d/src/widget.jl#L68-L81">source</a></section><h3><a class="nav-anchor" id="Auxiliary-functions-1" href="#Auxiliary-functions-1">Auxiliary functions</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Widgets.@map" href="#Widgets.@map"><code>Widgets.@map</code></a> — <span class="docstring-category">Macro</span>.</div><div><p><code>@map(d, x)</code></p><p>Apply the expression <code>x</code> to the widget <code>d</code>, replacing e.g. symbol <code>:s</code> with the corresponding <code>Observable</code> <code>observe(d[:s])</code>. To use the value of some of <code>d</code>&#39;s children, use <code>:s[]</code>. Use <code>$(:s)</code> if you want the output to update automatically as soon as the value of <code>observe(d[:s])</code> changes. In this context, <code>_</code> refers to the whole widget. To use actual symbols, escape them with <code>^</code>, as in <code>^(:a)</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using DataStructures, InteractBase, Observables

julia&gt; t = Widgets.Widget{:test}(OrderedDict(:a =&gt; Observable(2), :b =&gt; slider(1:100), :c =&gt; button()));</code></pre><p>This updates as soon as <code>observe(t[:a])</code> or <code>observe(t[:b])</code> change:</p><pre><code class="language-julia-repl">julia&gt; Widgets.@map t $(:a) + $(:b)
Observables.Observable{Int64}(&quot;ob_31&quot;, 52, Any[])</code></pre><p>whereas this only updates when button <code>:c</code> is pressed:</p><pre><code class="language-julia-repl">julia&gt; Widgets.@map t ($(:c); :a[] + :b[])
Observables.Observable{Int64}(&quot;ob_33&quot;, 52, Any[])</code></pre></div><a class="source-link" target="_blank" href="https://github.com/piever/Widgets.jl/blob/e3085cdcce96206c595093ed8d994e051d95131d/src/map.jl#L9-L38">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Widgets.@output!" href="#Widgets.@output!"><code>Widgets.@output!</code></a> — <span class="docstring-category">Macro</span>.</div><div><p><code>@output!(d, x)</code></p><p>Computes <code>Widgets.@map(d, x)</code> and sets <code>d.output</code> to be the result (see <a href="custom_widgets.html#Widgets.@map"><code>Widgets.@map</code></a> for more details). <code>d.display</code> is also set by default to match <code>d.output</code>. To have a custom display use <code>@display!(d, expr)</code> _after_ <code>@output!(d, x)</code></p></div><a class="source-link" target="_blank" href="https://github.com/piever/Widgets.jl/blob/e3085cdcce96206c595093ed8d994e051d95131d/src/output.jl#L1-L7">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Widgets.@display!" href="#Widgets.@display!"><code>Widgets.@display!</code></a> — <span class="docstring-category">Macro</span>.</div><div><p><code>@display!(d, x)</code></p><p>Computes <code>Widgets.@map(d, x)</code> and sets <code>d.display</code> to be the result (see <a href="custom_widgets.html#Widgets.@map"><code>Widgets.@map</code></a> for more details).</p></div><a class="source-link" target="_blank" href="https://github.com/piever/Widgets.jl/blob/e3085cdcce96206c595093ed8d994e051d95131d/src/output.jl#L16-L20">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Widgets.@layout" href="#Widgets.@layout"><code>Widgets.@layout</code></a> — <span class="docstring-category">Macro</span>.</div><div><p><code>@layout(x)</code></p><p>Returns a function, that takes as argument a widget <code>d</code> and replaces e.g. symbol <code>:s</code> with the corresponding subwidget <code>d[:s]</code>. In this context, <code>_</code> refers to the whole widget. To use actual symbols, escape them with <code>^</code>, as in <code>^(:a)</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using DataStructures, InteractBase, CSSUtil

julia&gt; f = Widgets.@layout hbox(:b, CSSUtil.hskip(1em), :c);

julia&gt; t = Widgets.Widget{:test}(OrderedDict(:b =&gt; slider(1:100), :c =&gt; button()));

julia&gt; f(t);</code></pre></div><a class="source-link" target="_blank" href="https://github.com/piever/Widgets.jl/blob/e3085cdcce96206c595093ed8d994e051d95131d/src/layout.jl#L1-L19">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Widgets.@layout!" href="#Widgets.@layout!"><code>Widgets.@layout!</code></a> — <span class="docstring-category">Macro</span>.</div><div><p><code>@layout!(d, x)</code></p><p>Set <code>d.layout</code> to match the result of <code>Widgets.@layout(x)</code>. See <a href="custom_widgets.html#Widgets.@layout"><code>Widgets.@layout</code></a> for more information.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using DataStructures, InteractBase, CSSUtil

julia&gt; t = Widgets.Widget{:test}(OrderedDict(:b =&gt; slider(1:100), :c =&gt; button()));

julia&gt; @layout! t hbox(:b, CSSUtil.hskip(1em), :c);</code></pre></div><a class="source-link" target="_blank" href="https://github.com/piever/Widgets.jl/blob/e3085cdcce96206c595093ed8d994e051d95131d/src/layout.jl#L32-L46">source</a></section><h2><a class="nav-anchor" id="A-simpler-approach:-the-manipulate-macro-1" href="#A-simpler-approach:-the-manipulate-macro-1">A simpler approach: the manipulate macro</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="InteractBase.@manipulate" href="#InteractBase.@manipulate"><code>InteractBase.@manipulate</code></a> — <span class="docstring-category">Macro</span>.</div><div><p><code>@manipulate expr</code></p><p>The @manipulate macro lets you play with any expression using widgets. <code>expr</code> needs to be a <code>for</code> loop. The <code>for</code> loop variable are converted to widgets using the <a href="widgets.html#Widgets.widget"><code>widget</code></a> function (ranges become <code>slider</code>, lists of options become <code>togglebuttons</code>, etc...). The <code>for</code> loop body is displayed beneath the widgets and automatically updated as soon as the widgets change value.</p><p>Use <code>throttle = df</code> to only update the output after a small time interval <code>dt</code> (useful if the update is costly as it prevents multiple updates when moving for example a slider).</p><p><strong>Examples</strong></p><pre><code class="language-julia">using Colors

@manipulate for r = 0:.05:1, g = 0:.05:1, b = 0:.05:1
    HTML(string(&quot;&lt;div style=&#39;color:#&quot;, hex(RGB(r,g,b)), &quot;&#39;&gt;Color me&lt;/div&gt;&quot;))
end

@manipulate throttle = 0.1 for r = 0:.05:1, g = 0:.05:1, b = 0:.05:1
    HTML(string(&quot;&lt;div style=&#39;color:#&quot;, hex(RGB(r,g,b)), &quot;&#39;&gt;Color me&lt;/div&gt;&quot;))
end</code></pre><p><a href="@ref"><code>@layout!</code></a> can be used to adjust the layout of a manipulate block:</p><pre><code class="language-julia">using Widgets, CSSUtil, WebIO

ui = @manipulate throttle = 0.1 for r = 0:.05:1, g = 0:.05:1, b = 0:.05:1
    HTML(string(&quot;&lt;div style=&#39;color:#&quot;, hex(RGB(r,g,b)), &quot;&#39;&gt;Color me&lt;/div&gt;&quot;))
end
@layout! ui dom&quot;div&quot;(_.display, vskip(2em), :r, :g, :b)
ui</code></pre></div><a class="source-link" target="_blank" href="https://github.com/piever/InteractBase.jl/blob/f3a1cdbdd66ded44fe638305072baa7d5ed8fd6c/src/manipulate.jl#L31-L66">source</a></section><footer><hr/><a class="previous" href="widgets.html"><span class="direction">Previous</span><span class="title">Widgets</span></a><a class="next" href="layout.html"><span class="direction">Next</span><span class="title">Layout</span></a></footer></article></body></html>
